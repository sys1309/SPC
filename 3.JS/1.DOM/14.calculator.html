<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>계산기</title>
    <style>
        .calculator{
            display: grid;
            grid-template-columns: repeat(4,1fr);
            grid-gap :10px;
            max-width : 300px;
            margin: 0 auto;
            text-align: center;
        }

        .calculator input{
            grid-column : span 4;
            padding: 10px;
            font-size: 18px;          
        }

        .calculator button {
            padding: 10px;
            font-size: 18px;
            
        }
    </style>
</head>
<body>
    <div class = "calculator">
        <input type = 'text' id = 'result' readonly>

        <button onclick = "clickSymbol(this.innerText)">+</button>
        <button onclick = "clickSymbol(this.innerText)">-</button>
        <button onclick = "clickSymbol(this.innerText)">*</button>
        <button onclick = "clickSymbol(this.innerText)">/</button>

        <button onclick = "clickNumber(this.innerText)">7</button>
        <button onclick = "clickNumber(this.innerText)">8</button>
        <button onclick = "clickNumber(this.innerText)">9</button>
        <button onclick = "calculate()">=</button>

        <button onclick = "clickNumber(this.innerText)">4</button>
        <button onclick = "clickNumber(this.innerText)">5</button>
        <button onclick = "clickNumber(this.innerText)">6</button>
        <button onclick = "clearResult()">C</button>     

        <button onclick = "clickNumber(this.innerText)">1</button>        
        <button onclick = "clickNumber(this.innerText)">2</button>        
        <button onclick = "clickNumber(this.innerText)">3</button>        
        <button onclick = "clickNumber(this.innerText)">0</button>        
       

    </div>
    <script>
        const inputBox = document.getElementById("result");

        function isSymbol(value){
            return "+-*/".includes(value)
            return ["+","-","*","/"].includes(value) //더명확하게 


        }

        function clickNumber(value) {
            //미션1. 숫자를this.innerText클릭해서 위의 입력창에 표시한다. 
            inputBox.value += value;
            //console.log("버튼 클릭");     

        }

        function clearResult(){
            inputBox.value = "";
        }

        function clickSymbol(value) {
            //숙제1. 심볼은 하나만 입력되어야함 (이전문자가 숫자일때만 입력)
            const lastInput = inputBox.value.slice(-1);
            //const lastInput = inputBox.value.charAt(inputBox.value.length-1);

            console.log(lastInput)

            if("+-*/".includes(lastInput)) {   
            } else (inputBox.value = inputBox.value + value )

            // if (lastInput === "+" || lastInput ==="-" || lastInput ==="*" || lastInput ==="/") {
            // } else (inputBox.value = inputBox.value + value)

            // if (lastInput ==="+") {
            // } else if (lastInput ==="-") {
            // } else if (lastInput ==="*") {
            // } else if (lastInput ==="/") {
            // } else (
            //     inputBox.value = inputBox.value + value
            // )

            if (isSymbol(lastInput)) {
                inputBox.value = inputBox.value.slice(0,-1) + value; 
            }else (
                inputBox.value = inputBox.value +value
            )

            function calculate() {
                // console.log(inputBox.value);
                // console.log(eval(inputBox.value));
                if (isDivisionByZero(inputBox.value)) {
                    inputBox.value = '0으로 나눌 수 없습니다.'
                } else {
                    try{
                        inputBox.value = eval(inputBox.value);
                    } catch(error) {
                    console.log(error) {
                        inputBox.value = "오류!!"
                    }
                }
            }}


                // inputBox.value = eval(inputBox.value);

                if (isDivisionByZero(inputBox.value)) {
                    inputBox.value = '0으로 나눌 수 없습니다.'
                } else {
            //         //마지막 글자가 부호로 끝나는지 확인
            //         const lastChar = inputBox.value.slice(-1);
            //         if (isSymbol(lastChar)) {
            //             inputBox.value = '부호로 끝날 수 없습니다.'
            //         } else (
            //             inputBox.value = eval(inputBox.value)
            //         )
            //     }
            // }

            function isDivisionByZero(expression) {
                for (let i = 0; i < expression.length; i++) {
                    //console.log(expression(i));
                    if (expression[i] === '/') {
                        if (expression[i+1] === "0") {
                            return true;
                        }
                    }
                }
                return false;
            }


            
            

        }

//
        //숙제2. 연산을 실제로 해야함 
    </script>
    
</body>
</html>